<!DOCTYPE html>
<html>
  <head>
    <title>Switch Lights</title>
    <style>
      /* Add any styles for your button or page here */
    </style>
  </head>
  <body>
    <h1>Switch Lights</h1>
    <label class="switch">
      <input type="checkbox" id="switch-button" {% if light_on %}checked{% endif %}>
      <span class="slider"></span>
    </label>
    <script>
      const switchButton = document.querySelector("#switch-button");
      switchButton.addEventListener("click", function() {
        const xhr = new XMLHttpRequest();
        xhr.open("POST", "/switch-lights");
        xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        const payload = JSON.stringify({ state: switchButton.checked ? "on" : "off" });
        xhr.send(payload);
      });
      
    </script>
  </body>
</html>
